# README
This is a image dataset created as a benchmark for Under-Display Camera (UDC) image restoration, released by CVPR'21 paper:

> **Removing Diffraction Image Artifacts in Under-Display Camera via
        Dynamic Skip Connection Network**<br>
> Ruicheng Feng, Chongyi Li, Huaijin Chen, Shuai Li, Chen Change Loy, Jinwei Gu<br>
> Computer Vision and Pattern Recognition (**CVPR**), 2021

For more information, please visit the project page:
    https://jnjaby.github.io/projects/UDC/


## Overview
All data is hosted on Google Drive:

| Path  | Files | Format | Description
| :---- | ----: | :---:  | :---------
| dataset | | | Main folder
| &#9500;&#9472;&nbsp; data_scripts | 4 | .py | Python scripts to process downloaded dataset.
| &#9500;&#9472;&nbsp; synthetic_data |  |  | Synthetic dataset.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; GT |  |  | Reprojected and cropped HDR images at 800&times;800.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; train | 2,016 | .npy | Training split.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; test | 360 | .npy | Test split.
| &#9500;&#9472;&nbsp; real_data |  |  | Real dataset.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; input | 30 | .npy | Input UDC images at 3264&times;2448, captured by ZTE phone.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; CCM_txt | 30 | .txt | Color correction matrix for each real input image.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; jpg_ZTE | 30 | .jpg | Camera output after built-in ISP.
| &#9500;&#9472;&nbsp; PSF |  |  | PSF-related files.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; kernel_code | 9 | .npy | Kernel code generated by PCA, `d=5`.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; kernel_info_list |  | .txt | List to specify iamges with corresponding path of PSF. To be generated by a script.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; ZTE_new |  9| .npy | PSFs in various angles, size 800&times;800.



## Dataset

Collected data are processed in the following order:

1. Download and unzip datasets into current directory:

    ```bash
    python data_scripts/download_dataset.py --dataset=UDC
    ```

    Alternatively, you can also download the data directly from [GoogleDrive](https://drive.google.com/drive/folders/13dZxX_9CI6CeS4zKd2SWGeT-7awhgaJF?usp=sharing), unzip and put them into `./datasets`.

1. Generating synthetic data by apply convolution with PSF for UDC simulation:

    ```bash
    python data_scripts/data_simulation.py --data_path=. --psf_type=ZTE_new
    ```

2. Generating info list of images together with corresponding PSF:

    ```bash
    python data_scripts/generate_info_list.py --data_path=. --psf_type=ZTE_new --save_dir=./PSF/kernel_info_list
    ```

## Citation

If you use the dataset in your publication, please consider citing our paper:
```
@inproceedings{feng2021removing,
    author = {Feng, Ruicheng and Li, Chongyi and Chen, Huaijin and Li, Shuai and Loy, Chen Change and Gu, Jinwei},
    title = {Removing Diffraction Image Artifacts in Under-Display Camera via Dynamic Skip Connection Networks},
    booktitle = {IEEE Conference on Computer Vision and Pattern Recognition (CVPR)},
    year = {2021}
}
```
